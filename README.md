# Python Chess Board Widget

A modern, feature-rich chess board widget for PySide6 applications, designed to mimic the visual style and user experience of Lichess.

## Features

- **Lichess-like Aesthetics**: Uses standard Lichess colors, SVG piece sets, and highlighting styles.
- **Interactive**: Supports both drag-and-drop and click-to-move interactions.
- **Smooth Animations**: Piece movements are animated for a better user experience.
- **Visual Indicators**:
  - Legal move highlights (dots for empty squares, rings for captures).
  - Last move highlighting.
  - Check indicator (red blurred glow behind the king).
  - Selected piece and hover highlights.
- **Responsive**: The board maintains its square aspect ratio and centers itself within the widget, scaling to fit the available space.
- **Board Flipping**: Easily toggle between White and Black perspectives.
- **Type Safe**: Fully typed codebase with `mypy` support (PEP 561 compliant).

## Installation

This package requires Python 3.9 or later.

You can install the package directly from the source:

```bash
pip install .
```

Or if you are developing:

```bash
pip install -e .[dev]
```

## Usage

Here is a simple example of how to use the `ChessBoardWidget` in a PySide6 application:

```python
import sys
import chess
from PySide6.QtWidgets import QApplication, QMainWindow, QVBoxLayout, QWidget
from lichess_board import ChessBoardWidget

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.setWindowTitle("Chess Board Example")
        self.resize(600, 600)

        # Create the widget
        self.board_widget = ChessBoardWidget()
        self.setCentralWidget(self.board_widget)

        # Connect to the move signal
        self.board_widget.move_played.connect(self.on_move_played)

        # Optional: Set an initial board state (defaults to starting position)
        # self.board_widget.set_board(chess.Board())

    def on_move_played(self, move: chess.Move):
        print(f"Move played: {move}")
        # The widget updates its internal board automatically for user moves.
        # You can access the board state via:
        # print(self.board_widget._board.fen())

if __name__ == "__main__":
    app = QApplication(sys.argv)
    window = MainWindow()
    window.show()
    sys.exit(app.exec())
```

### API Overview

- **`set_board(board: chess.Board)`**: Sets the board state to display.
- **`set_flipped(flipped: bool)`**: Sets the board orientation (`True` for Black at bottom, `False` for White at bottom).
- **`play_move(move: chess.Move, animate: bool = True)`**: Programmatically make a move on the board, optionally with animation.
- **`move_played` (Signal)**: Emitted when the user completes a move via mouse interaction. Carries the `chess.Move` object.

## Development

This project uses `make` for common development tasks.

### Prerequisites

- Python >= 3.9
- `pip`

### Setup

1. Clone the repository.
2. Create a virtual environment:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   ```
3. Install dependencies:
   ```bash
   pip install -e .[dev]
   ```
4. Install pre-commit hooks:
   ```bash
   pre-commit install
   ```

### Available Commands

- **`make check`**: Run all linting and type checking tools (`black`, `isort`, `flake8`, `mypy`).
- **`make test`**: Run the test suite using `pytest`.
- **`make clean`**: Remove autogenerated files and build artifacts.

## License

[MIT License](LICENSE)
